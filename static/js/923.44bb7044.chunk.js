"use strict";(self.webpackChunkmy_react_appo=self.webpackChunkmy_react_appo||[]).push([[923],{8923:(o,e,a)=>{a.r(e),a.d(e,{default:()=>w});var r=a(9950),n=a(4857),t=a(6589),i=a(899),c=a(6491),d=a(2053),s=a(226),l=a(7938),p=a(8429),x=a(2578),m=a(6639),h=a(2241),u=a(3464),g=a(33),C=a(8170),y=a(9739),E=a(4414);const j=o=>{let{open:e,message:a,onClose:r,onConfirm:n}=o;return(0,E.jsxs)(u.A,{open:e,onClose:r,children:[(0,E.jsx)(g.A,{children:"Alert"}),(0,E.jsx)(C.A,{children:(0,E.jsx)("p",{children:a})}),(0,E.jsxs)(y.A,{children:[(0,E.jsx)(s.A,{onClick:n,variant:"contained",color:"primary",children:"Confirm"}),(0,E.jsx)(s.A,{onClick:r,variant:"contained",color:"secondary",children:"Cancel"})]})]})};var v=a(1975);const R=(0,x.C3)(h.A),A=async o=>{const e=(0,x.KR)(R,o);(0,x.TF)(e).then((()=>{console.log("Node deleted successfully")})).catch((o=>{console.error("Error deleting node:",o)}))},f=async(o,e)=>{const a=(0,x.KR)(R,e);(0,x.hZ)(a,o).then((()=>{console.log("Data updated in Firebase Realtime Database successfully.")})).catch((o=>{console.error("Error updating data in Firebase Realtime Database:",o)}))},b=async(o,e)=>{try{const a=(0,x.KR)(R,e),r=(0,x.VC)(a).key;console.log("Push key:",r),o.Codigo=r;const n=(0,x.KR)(R,"".concat(e,"/").concat(r));await(0,x.hZ)(n,o),console.log("Data updated in Firebase Realtime Database successfully.")}catch(a){console.error("Error updating data in Firebase Realtime Database:",a.message)}},S=async(o,e)=>{const a=(0,x.C3)(h.A),r=(0,x.KR)(a,e);(0,x.yo)(r,o).then((()=>{console.log("Data updated in Firebase Realtime Database successfully.")})).catch((o=>{console.error("Error updating data in Firebase Realtime Database:",o)}))};var I=a(5189),k=a(2845);const w=()=>{const[o,e]=(0,r.useState)(!0),[a,u]=(0,r.useState)(""),[g,C]=(0,r.useState)("Seguro que ya se envio ese producto?"),[y,R]=(0,r.useState)(!0),[w,T]=(0,r.useState)([]),[G,O]=(0,r.useState)(null),[F,D]=(0,r.useState)([]),[M,N]=(0,r.useState)(null),P=(0,n.A)(),V=(0,x.C3)(h.A),B=(0,t.A)(P.breakpoints.down("sm")),{codigo:K,contexto:U}=(0,p.g)(),[q,L]=(0,r.useState)(!1);console.log(y.Codigo);const Z=()=>{const o="+8613212074721",e="Buenas, se necesita verificacion para que Chekea envie su compra ".concat(y.CompraId," , basta con responder con un OK"),a="whatsapp://send?phone=".concat(o,"&text=").concat(encodeURIComponent(e)),r="https://wa.me/".concat(o,"?text=").concat(encodeURIComponent(e)),n=document.createElement("a");n.href=a,n.style.display="none",document.body.appendChild(n),n.click(),setTimeout((()=>{"visible"===document.visibilityState&&window.open(r,"_blank"),document.body.removeChild(n)}),500)},_=(o,e)=>{L(!0),u(e),"Enviado"===e?O({...o,Estado:"Enviado",Envio:(new Date).getTime()}):(C("Seguro que el producto de codigo ".concat((0,v.o6)(String(y.CompraId))," ya fue retirado?\n\n PORFAVOR ASEGURESE!!!")),O({...o,Estado:"Retirado",Retiro:(new Date).getTime()}))},W=()=>{L(!1)},H=o=>{L(!0),F.forEach((e=>{((o,e)=>{switch(u(e),e){case"Comprado":C("Seguro que el producto de codigo ".concat((0,v.o6)(String(y.CompraId))," ya fue verificado?\n\n PORFAVOR ASEGURESE!!!")),O({...o,Estado:"Comprado"});break;case"Error":C("Seguro que el producto de codigo ".concat((0,v.o6)(String(y.CompraId))," tiene un error?\n\n PORFAVOR ASEGURESE!!!")),O({...G,Estado:"Error"});break;case"Enviado":C("Seguro que el producto de codigo ".concat((0,v.o6)(String(y.CompraId))," ya fue enviado?\n\n PORFAVOR ASEGURESE!!!")),O({...o,Estado:"Enviado",Envio:(new Date).getTime()});break;default:C("Seguro que el producto de codigo ".concat((0,v.o6)(String(y.CompraId))," ya fue retirado?\n\n PORFAVOR ASEGURESE!!!")),O({...o,Estado:"Retirado",Retiro:(new Date).getTime()})}console.log("otro mas",G)})(e,o)}))};(0,r.useEffect)((()=>((()=>{e(!0);const o=(0,x.KR)(V,"GE/Compras/".concat(U,"/").concat(K));(0,x.Zy)(o,(o=>{R(o.val());const a=Object.values(o.val().Productos);T(a),e(!1)}))})(),()=>{})),[]);const[J,$]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(!J&&0!==w.length){const o=(o,e)=>{console.log(y.Estado,"entar");let a="Comprado"===y.Estado||"Verificando..."===y.Estado?"Verificando":y.Estado;const r=(0,x.KR)(V,"GE/Comprador/".concat(o,"/MisCompras/").concat(a,"/").concat(e));(0,x.Jt)(r).then((o=>{o.exists()?(console.log(o.val(),"hold man"),D((e=>[...e,o.val()])),console.log(o.val()),$(!0)):console.log("No data available")})).catch((o=>{console.error("Error fetching data:",o)}))};w.forEach((e=>{const a=e.id,r=y.Comprador;o(r,a)}))}return()=>{}}),[w,J]);const[z,Q]=(0,r.useState)(""),[X,Y]=(0,r.useState)(!1);(0,p.Zp)();return(0,E.jsxs)("div",{children:[o?(0,E.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,E.jsx)(m.A,{})}):(0,E.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,E.jsx)(j,{open:q,message:g,onClose:W,onConfirm:async()=>{switch(a){case"Enviado":A("GE/Comprador/".concat(y.Comprador,"/MisCompras/Verificando/").concat(G.Codigo)).then((()=>{f(G,"GE/Comprador/".concat(y.Comprador,"/MisCompras/Enviado/").concat(G.Codigo)).then((()=>{S({Estado:"Enviado"},"GE/Compras/".concat(G.contexto,"/").concat(K)),b({Id:y.Comprador,Mensaje:"Su producto ha sido enviado satisfactoriamente",Titulo:"Producto Enviado"},"GE/Notificaciones")}))})).catch((o=>{console.error("Error deleting node:",o)}));break;case"Comprado":S({Estado:"Comprado"},"GE/Comprador/".concat(y.Comprador,"/MisCompras/Verificando/").concat(G.Codigo)).then((()=>{S({Estado:"Comprado"},"GE/Compras/Exterior/".concat(K)),b({Id:y.Comprador,Mensaje:"Su compra ha sido verificada y a esperas de ser enviado el producto",Titulo:"Compra Verificad"},"GE/Notificaciones")}));break;case"Error":A("GE/Comprador/".concat(y.Comprador,"/MisCompras/Verificando/").concat(G.Codigo)).then((()=>{f(G,"GE/Comprador/".concat(y.Comprador,"/MisCompras/Error/").concat(G.Codigo)).then((()=>{S({Estado:"Error"},"GE/Compras/Exterior/".concat(K)),b({Id:y.Comprador,Mensaje:"Ha surgido un error en su compra,porfavor contacte a atencion al cliente",Titulo:"Error de Compra"},"GE/Notificaciones")}))})).catch((o=>{console.error("Error deleting node:",o)}));break;case"Retirado":A("GE/Comprador/".concat(y.Comprador,"/MisCompras/Enviado/").concat(G.Codigo)).then((()=>{f(G,"GE/Comprador/".concat(y.Comprador,"/MisCompras/Retirado/").concat(G.Codigo)),S({Estado:"Retirado"},"GE/Compras/".concat(G.contexto,"/").concat(K)),S({Codigo:G.Producto,Vendedor:G.Vendedor,contexto:G.contexto,Cantidad:G.Cantidad,Id:G.Fecha,isTrue:!1,Comprador:y.Comprador,Fecha:G.Retiro},"GE/NotificacionReb/".concat(G.Fecha)),b({Id:y.Comprador,Mensaje:"Su producto ha sido retirado satisfactoriamente",Titulo:"Producto Retirado"},"GE/Notificaciones")})).catch((o=>{console.error("Error deleting node:",o)}));break;default:console.log("ninguno")}W()}}),(0,E.jsx)(i.Ay,{container:!0,children:B?(0,E.jsxs)("div",{children:[(0,E.jsx)(k.A,{texto:"Detalles"}),(0,E.jsx)(c.A,{sx:{display:"flex",justifyContent:"center"},children:(0,E.jsxs)(i.Ay,{item:!0,xs:10,children:[(0,E.jsx)("h2",{children:"INFORMACION COMPRA \n\nCodigo:".concat(y.CompraId," ")}),(0,E.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,E.jsxs)(i.Ay,{item:!0,xs:6,children:[(0,E.jsx)(d.A,{variant:"body1",sx:{color:"gray"},children:"Nombre"}),(0,E.jsx)(d.A,{variant:"body1",sx:{color:"gray"},children:"Barrio"}),(0,E.jsx)(d.A,{variant:"body1",sx:{color:"gray"},children:"Contacto"}),(0,E.jsx)(d.A,{variant:"body1",sx:{color:"gray"},children:"Lugar de Retiro"}),(0,E.jsx)(d.A,{variant:"body1",sx:{color:"gray"},children:"Intervalo"})]}),(0,E.jsxs)(i.Ay,{item:!0,xs:6,children:[(0,E.jsx)(d.A,{variant:"body1",children:y.Nombre}),(0,E.jsx)(d.A,{variant:"body1",children:void 0===y.Barrio?"Sin Especificar":y.Barrio}),(0,E.jsx)(d.A,{variant:"body1",children:y.Contacto}),(0,E.jsx)(d.A,{variant:"body1",children:void 0===y.RetiroLugar?"Sin Especificar":y.RetiroLugar}),(0,E.jsx)(d.A,{variant:"body1",children:void 0===y.Intervalo?"Sin Especificar":y.Intervalo})]})]}),(0,E.jsx)(l.A,{data:F,enviado:_})]})})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(i.Ay,{item:!0,xs:6,children:[(0,E.jsx)("h2",{children:"INFORMACION COMPRA\n\nCodigo:".concat(y.CompraId," ")}),(0,E.jsx)(c.A,{sx:{p:1,display:"flex",justifyContent:"center"},children:(0,E.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,E.jsxs)(i.Ay,{item:!0,xs:6,children:[(0,E.jsx)(d.A,{variant:"body1",sx:{color:"gray"},children:"Nombre"}),(0,E.jsx)(d.A,{variant:"body1",sx:{color:"gray"},children:"Barrio"}),(0,E.jsx)(d.A,{variant:"body1",sx:{color:"gray"},children:"Contacto"}),(0,E.jsx)(d.A,{variant:"body1",sx:{color:"gray"},children:"Lugar de Retiro"}),(0,E.jsx)(d.A,{variant:"body1",sx:{color:"gray"},children:"Intervalo"})]}),(0,E.jsxs)(i.Ay,{item:!0,xs:6,children:[(0,E.jsx)(d.A,{variant:"body1",children:y.Nombre}),(0,E.jsx)(d.A,{variant:"body1",children:void 0===y.Barrio?"Sin Especificar":y.Barrio}),(0,E.jsxs)("div",{style:{display:"flex"},children:[(0,E.jsx)(d.A,{variant:"body1",marginRight:3,children:y.Contacto}),(0,E.jsx)(I.CopyToClipboard,{text:y.Contacto,onCopy:()=>{Y(!0),setTimeout((()=>Y(!1)),2e3)},children:(0,E.jsx)("button",{children:"Copiar "})})]}),(0,E.jsx)(d.A,{variant:"body1",children:void 0===y.RetiroLugar?"Sin Especificar":y.RetiroLugar}),(0,E.jsx)(d.A,{variant:"body1",children:void 0===y.Intervalo?"Sin Especificar":y.Intervalo})]})]})}),null!==y.Imagen?(0,E.jsx)("div",{style:{display:"flex",marginTop:"10px",justifyContent:"center",alignItems:"center"},children:(0,E.jsx)("div",{style:{width:"50%",height:"50%"},children:(0,E.jsx)("img",{src:null===y||void 0===y?void 0:y.Imagen,alt:"Image",style:{width:"100%",height:"50%",objectFit:"contain"}})})}):null,"Exterior"===y.Contexto?"Verificando..."===y.Estado?(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px",marginTop:"10px"},children:[(0,E.jsx)(s.A,{onClick:()=>H("Comprado"),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Comprado"}),(0,E.jsx)(s.A,{onClick:()=>H("Error"),variant:"contained",color:"error",style:{borderRadius:"10px",marginRight:"14px"},children:"Error"})]}):"Comprado"===y.Estado?(0,E.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px",marginTop:"10px"},children:(0,E.jsx)(s.A,{onClick:()=>H("Enviado"),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Enviado"})}):"Enviado"===y.Estado?(0,E.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px",marginTop:"10px"},children:(0,E.jsx)(s.A,{onClick:()=>H("Retirado"),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Retirado"})}):null:null]}),""===a?(0,E.jsxs)(i.Ay,{item:!0,xs:6,children:[(0,E.jsx)("h2",{children:"".concat(F.length," PRODUCTOS COMPRADOS ")}),(0,E.jsx)(c.A,{sx:{p:2,flexDirection:"row"},children:(0,E.jsx)(l.A,{data:F,enviado:_})})]}):null]})}),B?(0,E.jsxs)("div",{children:[null!==y.Imagen?(0,E.jsx)("div",{style:{display:"flex",marginTop:"10px",justifyContent:"center",alignItems:"center"},children:(0,E.jsx)("div",{style:{width:"50%",height:"50%"},children:(0,E.jsx)("img",{src:y.Imagen,alt:"Image",style:{width:"100%",height:"50%",objectFit:"contain"}})})}):null,"Exterior"===y.Contexto?"Verificando..."===y.Estado?(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px",marginTop:"10px"},children:[(0,E.jsx)(s.A,{onClick:()=>H("Comprado"),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Comprado"}),(0,E.jsx)(s.A,{onClick:()=>H("Error"),variant:"contained",color:"error",style:{borderRadius:"10px",marginRight:"14px"},children:"Error"})]}):"Comprado"===y.Estado?(0,E.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px",marginTop:"10px"},children:(0,E.jsx)(s.A,{onClick:()=>H("Enviado"),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Enviado"})}):"Enviado"===y.Estado?(0,E.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px",marginTop:"10px"},children:(0,E.jsx)(s.A,{onClick:()=>H("Retirado"),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Retirado"})}):null:null]}):null]}),"Nacional"===y.Contexto&&(0,E.jsx)("button",{onClick:Z,children:"CONFIRMAR COMPRA "})]})}},7938:(o,e,a)=>{a.d(e,{A:()=>l});var r=a(899),n=a(6491),t=a(226),i=a(3464),c=a(9950),d=a(8429),s=a(4414);const l=function(o){let{data:e,enviado:a,isBuscar:l}=o;const[p,x]=(0,c.useState)(!1),[m,h]=(0,c.useState)(null),u=(0,d.Zp)(),g=o=>{h(o),x(!0)};return(0,s.jsxs)(s.Fragment,{children:[e.map(((o,e)=>(0,s.jsx)(r.Ay,{container:!0,justifyContent:"center",children:(0,s.jsx)(r.Ay,{item:!0,xs:12,sm:10,children:"Exterior"===o.contexto?(0,s.jsxs)(n.A,{display:"flex",alignItems:"center",p:1,borderRadius:8,boxShadow:3,width:"100%",children:[(0,s.jsx)("img",{src:o.Imagen,alt:"Sample",style:{borderRadius:"30%",width:"100%",maxWidth:"80px",marginRight:"16px"},onClick:()=>g(o.Imagen)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:o.Titulo}),(0,s.jsx)("p",{children:o.Detalles})]})]}):(0,s.jsx)("div",{style:{marginTop:15},children:(0,s.jsxs)(n.A,{display:"flex",alignItems:"center",p:1,borderRadius:8,onClick:()=>(o=>{if(l){let e="Guinea Ecuatorial"!==o.Pais?"Exterior":"Nacional";u("/Buscar/Editar/".concat(o.Codigo,"/").concat(e))}})(o),boxShadow:3,width:"100%",children:[(0,s.jsx)("img",{src:o.Imagen,alt:"Sample",style:{borderRadius:"30%",width:"100%",maxWidth:"80px",marginRight:"16px"},onClick:()=>g(o.Imagen)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:o.Titulo}),l?(0,s.jsx)("p",{children:"Cantidad:".concat(o.Cantidad,"     Stock:").concat(o.Stock,"\n")}):(0,s.jsx)("p",{children:o.Detalles})]}),l?null:"Retirado"!==o.Estado&&(0,s.jsx)("div",{style:{paddingLeft:"10px"},children:(0,s.jsx)(t.A,{onClick:()=>(o=>{"Enviado"===o.Estado?a(o,"Retirado"):a(o,"Enviado")})(o),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Comprado"===o.Estado?"Enviado":"Enviado"===o.Estado?"Retirado":null})})]})})})},e))),(0,s.jsx)(i.A,{open:p,onClose:()=>{x(!1),h(null)},maxWidth:"lg",children:(0,s.jsx)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.8)"},children:(0,s.jsx)("img",{src:m,alt:"Enlarged Sample",style:{width:"100%"}})})})]})}},1975:(o,e,a)=>{a.d(e,{D0:()=>n,o6:()=>r});a(563),a(6011),a(9950),a(2578),a(2241);const r=o=>{const e=o.match(/\d{5}$/);return e?e[0]:null};let n=(o,e)=>e.some((e=>e.Codigo===o))}}]);