"use strict";(self.webpackChunkmy_react_appo=self.webpackChunkmy_react_appo||[]).push([[412],{9412:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var o=a(9950),n=a(3464),l=a(33),c=a(8170),s=a(20),r=a(9739),i=a(226),d=a(4857),u=a(6589),g=a(6491),x=a(899),h=a(975),m=a(3695),p=a(9890),y=a(5277),f=a(2053),C=a(6639),j=a(2578),v=a(9751),A=(a(6820),a(294)),b=a(8429),E=a(2845),S=a(2675),w=a(4414);const R=e=>{let{isOpen:t,onClose:a,onConfirm:d}=e;const[u,g]=(0,o.useState)("");return(0,w.jsxs)(n.A,{open:t,onClose:a,children:[(0,w.jsx)(l.A,{children:"Introduzca Descuento"}),(0,w.jsx)(c.A,{children:(0,w.jsx)(s.A,{autoFocus:!0,margin:"dense",label:"Descuento en %",type:"number",fullWidth:!0,value:u,onChange:e=>g(e.target.value)})}),(0,w.jsxs)(r.A,{children:[(0,w.jsx)(i.A,{onClick:a,children:"Cancel"}),(0,w.jsx)(i.A,{onClick:()=>{u<90?d(u):alert("Ha ocurido un error"),a()},color:"primary",children:"Confirm"})]})]})},k=()=>{const[e,t]=(0,o.useState)(""),[a,n]=(0,o.useState)(""),[l,c]=(0,o.useState)(""),[r,k]=(0,o.useState)(""),[K,D]=(0,o.useState)(null),[P,I]=(0,o.useState)(""),[T,F]=(0,o.useState)(!1),[G,O]=(0,o.useState)(""),[z,L]=(0,o.useState)(!1),[N,W]=(0,o.useState)(""),[U,q]=(0,o.useState)([]),[Z,_]=(0,o.useState)("Aerea"),[J,M]=(0,o.useState)([]),[Y,B]=(0,o.useState)(!0),[H,V]=(0,o.useState)([]),[X,Q]=(0,o.useState)([]),[$,ee]=(0,o.useState)([]),[te,ae]=(0,o.useState)([]),[oe,ne]=(0,o.useState)({}),[le,ce]=(0,o.useState)(""),[se,re]=(0,o.useState)(""),[ie,de]=(0,o.useState)(""),ue=(0,j.C3)(A.A),ge=(0,d.A)(),xe=(0,u.A)(ge.breakpoints.down("sm")),{codigo:he,contexto:me}=(0,b.g)(),[pe,ye]=(0,o.useState)(!1),[fe,Ce]=(0,o.useState)(!1),[je,ve]=(0,o.useState)(!1),[Ae,be]=(0,o.useState)("");(0,b.Zp)();console.log(he);const[Ee,Se]=(0,o.useState)(null),we=()=>{Ce(!1)},Re=e=>"Guinea Ecuatorial"===e?"Nacional":"Exterior",ke=async e=>{let t=parseInt(e),a=Re(K.Pais);const o=(0,j.KR)(ue,"GE/".concat(a,"/Prod/").concat(he));try{if(console.log(e,"existe"),await(0,j.yo)(o,{Descuento:t}),t>0){(0,j.KR)(ue,"GE/Rebajas/".concat(he));const e=(0,j.KR)(ue,"GE/Filtros/".concat(a,"/").concat(K.Categoria,"/").concat(he));(0,j.KR)(ue,"GE/".concat(a,"/Prod/").concat(he));await(0,j.yo)(e,{Descuento:t})}else{const e=(0,j.KR)(ue,"GE/Rebajas/".concat(he)),o=(0,j.KR)(ue,"Filtros/".concat(a,"/").concat(K.Categoria,"/").concat(he));await(0,j.yo)(o,{Descuento:t}),await(0,j.TF)(e)}console.log("Data updated successfully")}catch(n){console.error("Error updating data: ",n)}},Ke=async()=>{try{const e=(0,j.KR)(ue,"GE");await(0,j.TF)((0,j.KR)(e,"Otros/".concat(he))),await(0,j.TF)((0,j.KR)(e,"Detalles/".concat(he))),"Moda & Accesorios"!==K.Categoria?await(0,j.TF)((0,j.KR)(e,"Filtros/".concat(Re(K.Pais),"/").concat(K.Categoria,"/").concat(he))):await(0,j.TF)((0,j.KR)(e,"Filtros/".concat(Re(K.Pais),"/").concat(K.Categoria,"/").concat(K.Genero,"/").concat(he))),await(0,j.TF)((0,j.KR)(e,"".concat(Re(K.Pais),"/Prod/").concat(he))),console.log("Data removed successfully")}catch(e){console.error("Error removing data: ",e)}};(0,o.useEffect)((()=>((()=>{let e=[],a=[];const o=(0,j.KR)(ue,"GE/".concat(me,"/Prod/").concat(he));(0,j.Zy)(o,(o=>{let l=o.val();D(l),t(l.Titulo),O(l.Ubicacion),n(l.Precio),c(l.Dimension),k(l.Espacio),W(l.Detalles),I(l.Cantidad),F(l.Stock);const s=l.Color,r=l.Talla;console.log(s),s&&(Object.values(s).forEach((t=>{e.push(t.label),console.log("Color Code: ".concat(t.Codigo,", Label: ").concat(t.label))})),V(e)),r&&(Object.values(r).forEach((e=>{a.push("".concat(e.label,":").concat(e.precio))})),ee(a))}))})(),()=>{})),[]);const De=async(e,t,a)=>{const o=(0,j.P)((0,j.KR)(ue,"GE/".concat(me,"/Prod/").concat(he,"/").concat(t)),(0,j.kT)("label"),(0,j.iz)(e));if("Eliminar"===a){const e=await(0,j.Jt)(o);if(e.exists()){let a;e.forEach((e=>{a=e.key})),console.log("Key:",a);const o=(0,j.KR)(ue,"GE/".concat(me,"/Prod/").concat(he,"/").concat(t,"/").concat(a));await(0,j.TF)(o),console.log("Node deleted successfully.")}}else try{(await(0,j.Jt)(o)).exists()||(console.log("ENTRAMOS",e,t),Pe(e,t))}catch(n){return console.error("Error checking value existence in the database:",n),!1}},Pe=async(e,t)=>{let o=Re(K.Pais);const n=(0,j.VC)((0,j.KR)(ue,"GE/".concat(o,"/Prod/").concat(he,"/").concat(t))).key,l="GE/".concat(o,"/Prod/").concat(he,"/").concat(t,"/").concat(n);if("Color"===t)await(0,j.hZ)((0,j.KR)(ue,l),{label:e,codigo:n}),console.log({label:e,codigo:n});else{console.log({label:e,precio:parseInt(""===oe[e]?a:oe[e]),codigo:n});const t=parseInt(""===oe[e]?a:oe[e],10);await(0,j.hZ)((0,j.KR)(ue,n),{label:e,precio:t,codigo:n})}};return(0,w.jsxs)(g.A,{component:"form",onSubmit:async t=>{t.preventDefault();const o={...K,Titulo:e,Ubicacion:G,Precio:parseFloat(a),Cantidad:parseInt(P),Detalles:N,Stock:"Nacional"===me?T:K.Stock,Espacio:"Exterior"===me?parseFloat(r):0,Dimension:void 0!==l?parseFloat(l):parseFloat(1.5)},n=(0,j.KR)(ue,"GE/".concat(me,"/Prod/").concat(he)),c=(0,j.KR)(ue,"GE/Filtros/".concat(me,"/").concat(K.Categoria,"/").concat(he));await(0,j.yo)(n,o),await(0,j.yo)(c,o);for(const e of H)De(e,"Color","");for(const e in oe)oe.hasOwnProperty(e)&&De(e,"Talla","");console.log(o.Categoria,K)},sx:{mt:2,padding:2},children:[(0,w.jsx)(E.A,{texto:"Editar"}),(0,w.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",marginTop:xe?40:0},children:[(0,w.jsx)(i.A,{variant:"contained",color:"info",onClick:()=>{ye(!0)},children:"APLICAR DESCUENTO"}),(0,w.jsx)(i.A,{variant:"contained",color:"error",style:{marginLeft:25},onClick:async()=>{const e=(0,j.KR)(ue,"GE/Otros/".concat(he)),t=(0,v.c7)(A.A);try{const a=await(0,j.Jt)(e);if(a.exists()){const e=a.val();for(const a in e){const o=e[a].Imagen;if(o){const e=(0,v.KR)(t,o);await(0,v.XR)(e),console.log("Deleted image: ".concat(o))}}Ke()}else console.log("No data available")}catch(a){console.error("Error: ",a)}},children:"ELIMINAR PRODUCTOR"})]}),(0,w.jsxs)(x.Ay,{container:!0,spacing:2,marginTop:xe?5:0,children:[(0,w.jsx)(x.Ay,{item:!0,xs:12,children:(0,w.jsx)(s.A,{label:"Title",variant:"outlined",value:e,onChange:e=>t(e.target.value),required:!0,fullWidth:!0})}),(0,w.jsx)(x.Ay,{item:!0,xs:12,children:(0,w.jsx)(s.A,{label:"Ubicacion",variant:"outlined",value:G,onChange:e=>O(e.target.value),required:!0,fullWidth:!0})}),(0,w.jsx)(x.Ay,{item:!0,xs:12,children:(0,w.jsx)(s.A,{label:"Price",variant:"outlined",type:"number",value:a,onChange:e=>n(e.target.value),required:!0,fullWidth:!0})}),"Nacional"===me&&(0,w.jsxs)(g.A,{display:"flex",alignItems:"flex-end",marginY:1,margin:1,children:[(0,w.jsx)(s.A,{label:"Cantidad",type:"number",value:P,onChange:e=>I(e.target.value),style:{marginLeft:"8px"}}),(0,w.jsx)("div",{style:{margin:10,marginLeft:30},children:(0,w.jsx)(h.A,{control:(0,w.jsx)(m.A,{checked:T,onChange:e=>{F(e.target.checked)}}),label:"Stock"})})]}),"Exterior"===me&&(0,w.jsx)(x.Ay,{item:!0,xs:12,children:(0,w.jsx)(s.A,{label:"Introduzca los Cm3",variant:"outlined",type:"number",value:r,onChange:e=>k(e.target.value),fullWidth:!0})}),(0,w.jsx)(x.Ay,{item:!0,xs:12,children:(0,w.jsx)(s.A,{label:"Introduzca los Kg",variant:"outlined",type:"number",value:l,onChange:e=>c(e.target.value),fullWidth:!0})}),(0,w.jsx)(x.Ay,{item:!0,xs:12,children:(0,w.jsx)(s.A,{label:"Details",variant:"outlined",multiline:!0,rows:4,value:N,onChange:e=>W(e.target.value),required:!0,fullWidth:!0})}),(0,w.jsxs)("div",{style:{margin:10},children:[(0,w.jsx)(p.A,{value:le,onChange:e=>ce(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),le.trim()&&(V([...H,le.trim()]),ce("")))},placeholder:"Introduzca Color"}),H.map(((e,t)=>(0,w.jsx)(y.A,{label:e,style:{margin:3},onDelete:()=>{return be(t=e),ve("Color"),Ce(!0),void V(H.filter((e=>e!==t)));var t}},t)))]}),(0,w.jsxs)("div",{style:{margin:10},children:[(0,w.jsx)(p.A,{value:se,onChange:e=>re(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),console.log(se,"k es"),se.trim()&&(ae([...te,se.trim()]),ne({...oe,[se.trim()]:""}),console.log("wetiin",oe),re("")))},placeholder:"Introduzca Estilo"}),$.map(((e,t)=>(0,w.jsx)(y.A,{label:e,style:{margin:3},onDelete:()=>(e=>{Ce(!0);const t=e.split(":");be(t[0]),ve("Talla"),ee($.filter((t=>t!==e)))})(e)}))),te.length>0&&(0,w.jsx)(f.A,{children:"Nuevos"})]}),te.map(((e,t)=>(0,w.jsxs)(g.A,{display:"flex",alignItems:"center",marginY:xe?1:5,children:[(0,w.jsx)(y.A,{label:e,style:{margin:3},onDelete:()=>(e=>{console.log("wettin"),ae(te.filter((t=>t!==e)));const t={...oe};delete t[e],ne(t)})(e)}),(0,w.jsx)(s.A,{label:"Price",type:"number",value:oe[e]||"",onChange:t=>((e,t)=>{ne({...oe,[t]:e.target.value})})(t,e),style:{marginLeft:"8px"}})]},t))),(0,w.jsx)("div",{style:{display:"flex",alignContent:"center",alignItems:"center"},children:(0,w.jsx)(i.A,{type:"submit",variant:"contained",color:"primary",children:z?(0,w.jsx)(C.A,{color:"warning",size:24}):"PUBLICAR"})})]}),Ee&&(0,w.jsxs)("p",{children:["Entered number: ",Ee]}),(0,w.jsx)(R,{isOpen:pe,onClose:()=>{ye(!1)},onConfirm:e=>{Se(e),ke(e),console.log("Confirmed value:",e)}}),(0,w.jsx)(S.A,{open:fe,message:"Seguro que desea borrar este valor?",onClose:we,onConfirm:()=>{De(Ae,je,"Eliminar"),we()}})]})}},2845:(e,t,a)=>{a.d(t,{A:()=>u});var o=a(9950),n=a(8429),l=a(4857),c=a(6589),s=a(5333),r=a(3189),i=a(4414);const d=e=>{let{texto:t}=e;const a=(0,l.A)(),o=(0,c.A)(a.breakpoints.down("sm")),d=(0,n.Zp)();return(0,i.jsx)(i.Fragment,{children:o&&(0,i.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:60,padding:a.spacing(1),backgroundColor:a.palette.background.paper,boxShadow:a.shadows[2],display:"flex",alignItems:"center",zIndex:1e3,boxSizing:"border-box"},children:[(0,i.jsx)(s.A,{onClick:()=>d(-1),"aria-label":"back",children:(0,i.jsx)(r.A,{})}),(0,i.jsx)("h2",{style:{marginLeft:a.spacing(2)},children:t})]})})},u=o.memo(d)}}]);